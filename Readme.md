# Сервис анонимных опросов

Anon-vote - это сервис для проведения анонимных опросов в любой сфере, позволяет быстро создавать опросы для социологических или маркетинговых исследований.   

**Ссылка:** http://anon-vote.ru  

**Swagger Open API** http://anon-vote.ru:8081/swagger-ui/index.html

**Backend:**  
Java 21, Spring Boot 3, PostgreSQL 15, Redis 8

**Frontend:**  
Next.js 15.5

**Infrastructure:**  
Docker, Docker Compose

**Additional:**  
Spring Data JPA, Spring MVC, Spring Security, Liquibase, Telegram Bot API, Angus Mail

## Архитектура проекта

В проекте модульная монолитная архитектура со следующими слоями в каждом модуле: <br/>
* Presenter (rest контроллеры, веб dto)
* Application (сервисы, бизнес-сущности)
* Infrastructure (интеграция с внешними сервисами - бд, телеграм, почта)

## Как собрать бэкенд

### 1. Запуск в dev режиме
В директории `docker/dev` находится конфигурация `docker-compose` для режима разработки.

В dev-режиме:
- открыт порт **5005** для подключения Java Debugger;
- приложение автоматически пересобирается при изменениях кода с помощью **watchexec**, который отслеживает директорию `src`.

#### Шаги для запуска:

1. В директории `docker/dev`:
   - скопировать файл `.env.example` в `.env`;
   - заполнить **все** переменные окружения корректными значениями.

2. Из корня проекта выполнить:
   ```bash
   scripts/local-rebuild.sh

### 2. Запуск в prod-режиме

В директории `docker/prod` находится конфигурация `docker-compose` для продакшн-окружения.

#### Шаги для запуска:

1. В директории `docker/prod`:
   - скопировать файл `.env.example` в `.env`;
   - заполнить **все** переменные окружения корректными значениями.

2. Подготовить окружение для деплоя:
   - скопировать `scripts/.env.example` в `scripts/.env`;
   - указать параметры подключения к серверу;
   - убедиться, что на локальной машине настроен **SSH-ключ** для подключения без запроса пароля.

3. Из корня проекта выполнить команду деплоя:
   ```bash
   scripts/deploy-prod.sh

## Ключевые особенности

### Гарантированная анонимность
- Ответы не привязываются к личности пользователя
- Подтверждение email используется для гарантии уникальности ответов
- Все данные агрегируются и анонимизируются

### Аналитика
- Динамика ответов по времени
- Экспорт результатов в CSV

### Мультиплатформенность
- **Web**: Полная функциональность + расширенная статистика
- **Telegram**: Мгновенные опросы "на ходу" в телеграмм боте

### Дополнительно
- Категоризация всех опросов, иерархия категорий
- Поиск по тегам + категориям + названию
- Upvote / Downvote опросов

### В планах:
- Сортировка опросов по оценкам 
- Возможность подписаться на категории опросов
- Обсуждение опросов





